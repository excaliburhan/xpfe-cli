#!/usr/bin/env node

var path = require('path')
var program = require('commander')
var chalk = require('chalk')
var file = require('../lib/file')
var tplJSON = require(file.filePath())

// help
function help () {
  program.parse(process.argv)
  if (program.args.length < 1) return program.help()
}

function deleteTpl(name) {
  if (tplJSON[name]) {
    var str = 'Template `'+ name +'` deleted.'
    delete tplJSON[name]
    file.updateFile(JSON.stringify(tplJSON), str)
  } else {
    console.log()
    console.log(chalk.red('No such template!'))
  }
}

program
  .usage('<template-name>')
  .on('--help', function () {
    console.log('  Examples:')
    console.log()
    console.log(chalk.gray('    # Delete a certain template'))
    console.log('    $ xpfe del test')
    console.log()
  })

help()

// get params
var templateName = program.args[0]

console.log()
process.on('exit', function () {
  console.log()
})

if (templateName) {
  deleteTpl(templateName)
}
